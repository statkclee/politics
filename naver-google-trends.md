# 데이터 과학자가 바라본 20대 총선



## 네이버 검색 추세

제19대 대통령선거가 치뤄지고 있는 2017년 현재 기존 PC 패러다임의 강자 네이버와 안드로이드를 품고 있는 
모바일 강자 구글이 각자 분야에서 양강을 이뤄 자웅을 겨루는 것은 확실하다. 즉, 이동할 때는 모바일 구글, 이동하지 않고 자리를 잡고 있을 때는 PC 네이버가 확실한 경쟁우위를 갖추고 있다. 
젊은 사람은 스마트폰을 주로 삼고 PC를 세컨드로 활용하고, 중장년층은 큰화면의 PC를 주로 삼고
스마트폰을 세컨드로 삼아 검색작업을 수행한다.

[구글 추세(Google Trends)](https://trends.google.com/) 서비스를 통해 사용자들이 가장 많이 검색하는 검색어를 통해 추세를 대세(?)를 살펴볼 수 있다. 
특히, 안드로이드, iOS 탑재된 스마트폰이 널리 보급되고 검색 인터페이스가 기존 입력방식에서 음성언어를 폭넓게 지원하고, 인식률도 현저히 높아짐에 따라 사람들의 검색량도 증가하고 구글 추세 분석 결과도 신빙성을 높혀가고 있다.

그럼 구글 추세를 네이버 검색에 유사하게 적용하여 보자.

## 네이버 검색 추세(nTrend)

[네이버 검색 도구](https://github.com/forkonlp/N2H4)를 활용하여 원데이터를 가져오고 나서,
해당기간 최대 검색결과에 대한 값을 최대값으로 정하고 이에 대한 상대적인 비율을 적용하여 추세정보를 생성한다.

### 검색 총계

최근 한달간 검색을 누적하여 살펴본다.

<img src="fig/ntrend-histogram-1.png" style="display: block; margin: auto;" />

### 최근 한달간 네이버 검색

17년 4월 1일부터 최근까지 한달간 추세를 인터랙티브하게 표현하여 살펴본다.

<!--html_preserve--><div id="htmlwidget-1a4a42a89abdc858df26" style="width:1152px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1a4a42a89abdc858df26">{"x":{"data":[{"x":[1491004800000,1491091200000,1491177600000,1491264000000,1491350400000,1491436800000,1491523200000,1491609600000,1491696000000,1491782400000,1491868800000,1491955200000,1492041600000,1492128000000,1492214400000,1492300800000,1492387200000,1492473600000,1492560000000,1492646400000,1492732800000,1492819200000,1492905600000,1492992000000,1493078400000,1493164800000,1493251200000,1493337600000,1493424000000,1493510400000,1493596800000,1493683200000,1493769600000],"y":[13.102441059879,19.7997079073649,67.7863551011892,69.5806384310453,46.1715001043188,56.1443772167745,54.8090965992072,19.7579803880659,26.8516586688921,67.4942624660964,63.509284373044,65.9086167327352,68.7252242854162,59.1487586063009,23.1587732109326,46.0671813060714,88.4414771541832,84.5816816190277,80.7010223242228,100,65.5956603379929,40.4548299603589,53.6615898184853,86.4176924681828,73.2526601293553,91.4041310244106,91.8422699770499,67.5777175046943,36.7410807427498,49.9895681201753,68.4331316503234,64.5941998748174,66.9309409555602],"text":["date: 2017-04-01<br>ntrend: 13.1<br>후보: 문재인","date: 2017-04-02<br>ntrend: 19.8<br>후보: 문재인","date: 2017-04-03<br>ntrend: 67.79<br>후보: 문재인","date: 2017-04-04<br>ntrend: 69.58<br>후보: 문재인","date: 2017-04-05<br>ntrend: 46.17<br>후보: 문재인","date: 2017-04-06<br>ntrend: 56.14<br>후보: 문재인","date: 2017-04-07<br>ntrend: 54.81<br>후보: 문재인","date: 2017-04-08<br>ntrend: 19.76<br>후보: 문재인","date: 2017-04-09<br>ntrend: 26.85<br>후보: 문재인","date: 2017-04-10<br>ntrend: 67.49<br>후보: 문재인","date: 2017-04-11<br>ntrend: 63.51<br>후보: 문재인","date: 2017-04-12<br>ntrend: 65.91<br>후보: 문재인","date: 2017-04-13<br>ntrend: 68.73<br>후보: 문재인","date: 2017-04-14<br>ntrend: 59.15<br>후보: 문재인","date: 2017-04-15<br>ntrend: 23.16<br>후보: 문재인","date: 2017-04-16<br>ntrend: 46.07<br>후보: 문재인","date: 2017-04-17<br>ntrend: 88.44<br>후보: 문재인","date: 2017-04-18<br>ntrend: 84.58<br>후보: 문재인","date: 2017-04-19<br>ntrend: 80.7<br>후보: 문재인","date: 2017-04-20<br>ntrend: 100<br>후보: 문재인","date: 2017-04-21<br>ntrend: 65.6<br>후보: 문재인","date: 2017-04-22<br>ntrend: 40.45<br>후보: 문재인","date: 2017-04-23<br>ntrend: 53.66<br>후보: 문재인","date: 2017-04-24<br>ntrend: 86.42<br>후보: 문재인","date: 2017-04-25<br>ntrend: 73.25<br>후보: 문재인","date: 2017-04-26<br>ntrend: 91.4<br>후보: 문재인","date: 2017-04-27<br>ntrend: 91.84<br>후보: 문재인","date: 2017-04-28<br>ntrend: 67.58<br>후보: 문재인","date: 2017-04-29<br>ntrend: 36.74<br>후보: 문재인","date: 2017-04-30<br>ntrend: 49.99<br>후보: 문재인","date: 2017-05-01<br>ntrend: 68.43<br>후보: 문재인","date: 2017-05-02<br>ntrend: 64.59<br>후보: 문재인","date: 2017-05-03<br>ntrend: 66.93<br>후보: 문재인"],"key":null,"type":"scatter","mode":"lines","name":"문재인","line":{"width":1.88976377952756,"color":"rgba(6,92,232,1)","dash":"solid"},"hoveron":"points","legendgroup":"문재인","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text"},{"x":[1491004800000,1491091200000,1491177600000,1491264000000,1491350400000,1491436800000,1491523200000,1491609600000,1491696000000,1491782400000,1491868800000,1491955200000,1492041600000,1492128000000,1492214400000,1492300800000,1492387200000,1492473600000,1492560000000,1492646400000,1492732800000,1492819200000,1492905600000,1492992000000,1493078400000,1493164800000,1493251200000,1493337600000,1493424000000,1493510400000,1493596800000,1493683200000,1493769600000],"y":[10.8908825370332,12.8729397037346,31.9632797830169,27.5610264969748,31.7755059461715,26.3926559566034,26.1422908408095,10.9534738159816,16.0650949301064,36.0734404339662,27.185478823284,30.0646776549134,43.4800751095347,32.65178385145,16.9622365950344,20.6968495722929,40.9555601919466,34.7172960567494,44.857083246401,52.8061756728562,41.4562904235343,20.0292092635093,32.6100563321511,47.2355518464427,58.8775297308575,62.3200500730232,42.937617358648,54.6630502816608,22.8249530565408,34.1957020655122,55.184644272898,88.6501147506781,48.6751512622575],"text":["date: 2017-04-01<br>ntrend: 10.89<br>후보: 홍준표","date: 2017-04-02<br>ntrend: 12.87<br>후보: 홍준표","date: 2017-04-03<br>ntrend: 31.96<br>후보: 홍준표","date: 2017-04-04<br>ntrend: 27.56<br>후보: 홍준표","date: 2017-04-05<br>ntrend: 31.78<br>후보: 홍준표","date: 2017-04-06<br>ntrend: 26.39<br>후보: 홍준표","date: 2017-04-07<br>ntrend: 26.14<br>후보: 홍준표","date: 2017-04-08<br>ntrend: 10.95<br>후보: 홍준표","date: 2017-04-09<br>ntrend: 16.07<br>후보: 홍준표","date: 2017-04-10<br>ntrend: 36.07<br>후보: 홍준표","date: 2017-04-11<br>ntrend: 27.19<br>후보: 홍준표","date: 2017-04-12<br>ntrend: 30.06<br>후보: 홍준표","date: 2017-04-13<br>ntrend: 43.48<br>후보: 홍준표","date: 2017-04-14<br>ntrend: 32.65<br>후보: 홍준표","date: 2017-04-15<br>ntrend: 16.96<br>후보: 홍준표","date: 2017-04-16<br>ntrend: 20.7<br>후보: 홍준표","date: 2017-04-17<br>ntrend: 40.96<br>후보: 홍준표","date: 2017-04-18<br>ntrend: 34.72<br>후보: 홍준표","date: 2017-04-19<br>ntrend: 44.86<br>후보: 홍준표","date: 2017-04-20<br>ntrend: 52.81<br>후보: 홍준표","date: 2017-04-21<br>ntrend: 41.46<br>후보: 홍준표","date: 2017-04-22<br>ntrend: 20.03<br>후보: 홍준표","date: 2017-04-23<br>ntrend: 32.61<br>후보: 홍준표","date: 2017-04-24<br>ntrend: 47.24<br>후보: 홍준표","date: 2017-04-25<br>ntrend: 58.88<br>후보: 홍준표","date: 2017-04-26<br>ntrend: 62.32<br>후보: 홍준표","date: 2017-04-27<br>ntrend: 42.94<br>후보: 홍준표","date: 2017-04-28<br>ntrend: 54.66<br>후보: 홍준표","date: 2017-04-29<br>ntrend: 22.82<br>후보: 홍준표","date: 2017-04-30<br>ntrend: 34.2<br>후보: 홍준표","date: 2017-05-01<br>ntrend: 55.18<br>후보: 홍준표","date: 2017-05-02<br>ntrend: 88.65<br>후보: 홍준표","date: 2017-05-03<br>ntrend: 48.68<br>후보: 홍준표"],"key":null,"type":"scatter","mode":"lines","name":"홍준표","line":{"width":1.88976377952756,"color":"rgba(255,0,0,1)","dash":"solid"},"hoveron":"points","legendgroup":"홍준표","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text"},{"x":[1491004800000,1491091200000,1491177600000,1491264000000,1491350400000,1491436800000,1491523200000,1491609600000,1491696000000,1491782400000,1491868800000,1491955200000,1492041600000,1492128000000,1492214400000,1492300800000,1492387200000,1492473600000,1492560000000,1492646400000,1492732800000,1492819200000,1492905600000,1492992000000,1493078400000,1493164800000,1493251200000,1493337600000,1493424000000,1493510400000,1493596800000,1493683200000,1493769600000],"y":[12.7268933861882,18.6730648862925,29.4804923847277,52.2011266430211,60.0876277905279,51.4917588149384,48.4456499061131,14.041310244106,27.4567076987273,54.4961402044649,54.6630502816608,63.634466930941,65.5122052993949,52.9730857500522,18.9651575213854,38.6396828708533,81.1391612768621,69.6640934696432,65.5122052993949,81.9528479031922,58.4393907782182,28.8754433548925,48.0492384727728,72.1468808679324,67.8072188608387,76.2361777592322,65.6373878572919,63.1963279783017,28.97976215314,51.8047152096808,55.2055080325475,59.6286250782391,47.6528270394325],"text":["date: 2017-04-01<br>ntrend: 12.73<br>후보: 안철수","date: 2017-04-02<br>ntrend: 18.67<br>후보: 안철수","date: 2017-04-03<br>ntrend: 29.48<br>후보: 안철수","date: 2017-04-04<br>ntrend: 52.2<br>후보: 안철수","date: 2017-04-05<br>ntrend: 60.09<br>후보: 안철수","date: 2017-04-06<br>ntrend: 51.49<br>후보: 안철수","date: 2017-04-07<br>ntrend: 48.45<br>후보: 안철수","date: 2017-04-08<br>ntrend: 14.04<br>후보: 안철수","date: 2017-04-09<br>ntrend: 27.46<br>후보: 안철수","date: 2017-04-10<br>ntrend: 54.5<br>후보: 안철수","date: 2017-04-11<br>ntrend: 54.66<br>후보: 안철수","date: 2017-04-12<br>ntrend: 63.63<br>후보: 안철수","date: 2017-04-13<br>ntrend: 65.51<br>후보: 안철수","date: 2017-04-14<br>ntrend: 52.97<br>후보: 안철수","date: 2017-04-15<br>ntrend: 18.97<br>후보: 안철수","date: 2017-04-16<br>ntrend: 38.64<br>후보: 안철수","date: 2017-04-17<br>ntrend: 81.14<br>후보: 안철수","date: 2017-04-18<br>ntrend: 69.66<br>후보: 안철수","date: 2017-04-19<br>ntrend: 65.51<br>후보: 안철수","date: 2017-04-20<br>ntrend: 81.95<br>후보: 안철수","date: 2017-04-21<br>ntrend: 58.44<br>후보: 안철수","date: 2017-04-22<br>ntrend: 28.88<br>후보: 안철수","date: 2017-04-23<br>ntrend: 48.05<br>후보: 안철수","date: 2017-04-24<br>ntrend: 72.15<br>후보: 안철수","date: 2017-04-25<br>ntrend: 67.81<br>후보: 안철수","date: 2017-04-26<br>ntrend: 76.24<br>후보: 안철수","date: 2017-04-27<br>ntrend: 65.64<br>후보: 안철수","date: 2017-04-28<br>ntrend: 63.2<br>후보: 안철수","date: 2017-04-29<br>ntrend: 28.98<br>후보: 안철수","date: 2017-04-30<br>ntrend: 51.8<br>후보: 안철수","date: 2017-05-01<br>ntrend: 55.21<br>후보: 안철수","date: 2017-05-02<br>ntrend: 59.63<br>후보: 안철수","date: 2017-05-03<br>ntrend: 47.65<br>후보: 안철수"],"key":null,"type":"scatter","mode":"lines","name":"안철수","line":{"width":1.88976377952756,"color":"rgba(7,249,31,1)","dash":"solid"},"hoveron":"points","legendgroup":"안철수","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text"},{"x":[1491004800000,1491091200000,1491177600000,1491264000000,1491350400000,1491436800000,1491523200000,1491609600000,1491696000000,1491782400000,1491868800000,1491955200000,1492041600000,1492128000000,1492214400000,1492300800000,1492387200000,1492473600000,1492560000000,1492646400000,1492732800000,1492819200000,1492905600000,1492992000000,1493078400000,1493164800000,1493251200000,1493337600000,1493424000000,1493510400000,1493596800000,1493683200000,1493769600000],"y":[7.36490715626956,9.88942207385771,21.552263717922,21.2810348424786,23.6803672021698,19.1320675985813,19.5702065512205,8.42895889839349,15.1470895055289,21.3018986021281,16.5032338827457,16.8787815564365,33.6115167953265,32.4014187356562,14.4585854370958,26.3717921969539,35.468391404131,25.6832881285208,36.1360317129147,50.406843313165,32.7561026496975,13.4779887335698,30.1898602128103,43.6052576674317,52.5975380763614,47.5485082411851,29.4179011057793,43.0419361568955,15.1053619862299,18.652201126643,28.6250782390987,65.2409764239516,30.899228040893],"text":["date: 2017-04-01<br>ntrend: 7.36<br>후보: 유승민","date: 2017-04-02<br>ntrend: 9.89<br>후보: 유승민","date: 2017-04-03<br>ntrend: 21.55<br>후보: 유승민","date: 2017-04-04<br>ntrend: 21.28<br>후보: 유승민","date: 2017-04-05<br>ntrend: 23.68<br>후보: 유승민","date: 2017-04-06<br>ntrend: 19.13<br>후보: 유승민","date: 2017-04-07<br>ntrend: 19.57<br>후보: 유승민","date: 2017-04-08<br>ntrend: 8.43<br>후보: 유승민","date: 2017-04-09<br>ntrend: 15.15<br>후보: 유승민","date: 2017-04-10<br>ntrend: 21.3<br>후보: 유승민","date: 2017-04-11<br>ntrend: 16.5<br>후보: 유승민","date: 2017-04-12<br>ntrend: 16.88<br>후보: 유승민","date: 2017-04-13<br>ntrend: 33.61<br>후보: 유승민","date: 2017-04-14<br>ntrend: 32.4<br>후보: 유승민","date: 2017-04-15<br>ntrend: 14.46<br>후보: 유승민","date: 2017-04-16<br>ntrend: 26.37<br>후보: 유승민","date: 2017-04-17<br>ntrend: 35.47<br>후보: 유승민","date: 2017-04-18<br>ntrend: 25.68<br>후보: 유승민","date: 2017-04-19<br>ntrend: 36.14<br>후보: 유승민","date: 2017-04-20<br>ntrend: 50.41<br>후보: 유승민","date: 2017-04-21<br>ntrend: 32.76<br>후보: 유승민","date: 2017-04-22<br>ntrend: 13.48<br>후보: 유승민","date: 2017-04-23<br>ntrend: 30.19<br>후보: 유승민","date: 2017-04-24<br>ntrend: 43.61<br>후보: 유승민","date: 2017-04-25<br>ntrend: 52.6<br>후보: 유승민","date: 2017-04-26<br>ntrend: 47.55<br>후보: 유승민","date: 2017-04-27<br>ntrend: 29.42<br>후보: 유승민","date: 2017-04-28<br>ntrend: 43.04<br>후보: 유승민","date: 2017-04-29<br>ntrend: 15.11<br>후보: 유승민","date: 2017-04-30<br>ntrend: 18.65<br>후보: 유승민","date: 2017-05-01<br>ntrend: 28.63<br>후보: 유승민","date: 2017-05-02<br>ntrend: 65.24<br>후보: 유승민","date: 2017-05-03<br>ntrend: 30.9<br>후보: 유승민"],"key":null,"type":"scatter","mode":"lines","name":"유승민","line":{"width":1.88976377952756,"color":"rgba(0,250,255,1)","dash":"solid"},"hoveron":"points","legendgroup":"유승민","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text"},{"x":[1491004800000,1491091200000,1491177600000,1491264000000,1491350400000,1491436800000,1491523200000,1491609600000,1491696000000,1491782400000,1491868800000,1491955200000,1492041600000,1492128000000,1492214400000,1492300800000,1492387200000,1492473600000,1492560000000,1492646400000,1492732800000,1492819200000,1492905600000,1492992000000,1493078400000,1493164800000,1493251200000,1493337600000,1493424000000,1493510400000,1493596800000,1493683200000,1493769600000],"y":[3.56770290006259,5.2368036720217,10.5779261422908,8.61673273523889,9.09659920717713,9.47214688086793,10.1815147089506,3.1712914667223,7.2814521176716,12.0383893177551,10.5361986229919,21.2184435635301,31.6920509075735,22.6163154600459,9.38869184226998,20.8220321301899,29.5848111829752,19.7788441477154,32.1927811391613,35.4266638848321,20.0292092635093,6.63467556853745,21.7400375547674,31.2121844356353,36.490715626956,35.0928437304402,26.4969747548508,37.5964948883789,11.3290214896724,14.7089505528896,27.4567076987273,37.2835384936366,25.5581055706238],"text":["date: 2017-04-01<br>ntrend: 3.57<br>후보: 심상정","date: 2017-04-02<br>ntrend: 5.24<br>후보: 심상정","date: 2017-04-03<br>ntrend: 10.58<br>후보: 심상정","date: 2017-04-04<br>ntrend: 8.62<br>후보: 심상정","date: 2017-04-05<br>ntrend: 9.1<br>후보: 심상정","date: 2017-04-06<br>ntrend: 9.47<br>후보: 심상정","date: 2017-04-07<br>ntrend: 10.18<br>후보: 심상정","date: 2017-04-08<br>ntrend: 3.17<br>후보: 심상정","date: 2017-04-09<br>ntrend: 7.28<br>후보: 심상정","date: 2017-04-10<br>ntrend: 12.04<br>후보: 심상정","date: 2017-04-11<br>ntrend: 10.54<br>후보: 심상정","date: 2017-04-12<br>ntrend: 21.22<br>후보: 심상정","date: 2017-04-13<br>ntrend: 31.69<br>후보: 심상정","date: 2017-04-14<br>ntrend: 22.62<br>후보: 심상정","date: 2017-04-15<br>ntrend: 9.39<br>후보: 심상정","date: 2017-04-16<br>ntrend: 20.82<br>후보: 심상정","date: 2017-04-17<br>ntrend: 29.58<br>후보: 심상정","date: 2017-04-18<br>ntrend: 19.78<br>후보: 심상정","date: 2017-04-19<br>ntrend: 32.19<br>후보: 심상정","date: 2017-04-20<br>ntrend: 35.43<br>후보: 심상정","date: 2017-04-21<br>ntrend: 20.03<br>후보: 심상정","date: 2017-04-22<br>ntrend: 6.63<br>후보: 심상정","date: 2017-04-23<br>ntrend: 21.74<br>후보: 심상정","date: 2017-04-24<br>ntrend: 31.21<br>후보: 심상정","date: 2017-04-25<br>ntrend: 36.49<br>후보: 심상정","date: 2017-04-26<br>ntrend: 35.09<br>후보: 심상정","date: 2017-04-27<br>ntrend: 26.5<br>후보: 심상정","date: 2017-04-28<br>ntrend: 37.6<br>후보: 심상정","date: 2017-04-29<br>ntrend: 11.33<br>후보: 심상정","date: 2017-04-30<br>ntrend: 14.71<br>후보: 심상정","date: 2017-05-01<br>ntrend: 27.46<br>후보: 심상정","date: 2017-05-02<br>ntrend: 37.28<br>후보: 심상정","date: 2017-05-03<br>ntrend: 25.56<br>후보: 심상정"],"key":null,"type":"scatter","mode":"lines","name":"심상정","line":{"width":1.88976377952756,"color":"rgba(242,238,9,1)","dash":"solid"},"hoveron":"points","legendgroup":"심상정","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text"},{"x":[1492560000000,1492560000000],"y":[-1.85,104.85],"text":"xintercept: 17275","key":null,"type":"scatter","mode":"lines","name":"","line":{"width":1.88976377952756,"color":"rgba(169,169,169,1)","dash":"dashdot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text"},{"x":[1492905600000,1492905600000],"y":[-1.85,104.85],"text":"xintercept: 17279","key":null,"type":"scatter","mode":"lines","name":"","line":{"width":1.88976377952756,"color":"rgba(169,169,169,1)","dash":"dashdot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text"},{"x":[1493078400000,1493078400000],"y":[-1.85,104.85],"text":"xintercept: 17281","key":null,"type":"scatter","mode":"lines","name":"","line":{"width":1.88976377952756,"color":"rgba(169,169,169,1)","dash":"dashdot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text"},{"x":[1493337600000,1493337600000],"y":[-1.85,104.85],"text":"xintercept: 17284","key":null,"type":"scatter","mode":"lines","name":"","line":{"width":1.88976377952756,"color":"rgba(169,169,169,1)","dash":"dashdot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text"},{"x":[1493683200000,1493683200000],"y":[-1.85,104.85],"text":"xintercept: 17288","key":null,"type":"scatter","mode":"lines","name":"","line":{"width":1.88976377952756,"color":"rgba(169,169,169,1)","dash":"dashdot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text"},{"x":[1492560000000],"y":[3],"text":"KBS","key":null,"textfont":{"size":11.3385826771654,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","name":""},{"x":[1492905600000],"y":[3],"text":"1차","key":null,"textfont":{"size":11.3385826771654,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","name":""},{"x":[1493078400000],"y":[3],"text":"JTBC","key":null,"textfont":{"size":11.3385826771654,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","name":""},{"x":[1493337600000],"y":[3],"text":"2차","key":null,"textfont":{"size":11.3385826771654,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","name":""},{"x":[1493683200000],"y":[3],"text":"3차","key":null,"textfont":{"size":11.3385826771654,"color":"rgba(0,0,0,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","name":""}],"layout":{"margin":{"t":57.4445828144458,"r":7.30593607305936,"b":31.1498547114985,"l":25.9028642590286},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":"<b> 후보별 네이버 검색 추세 <\/b>","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":23.9103362391034},"xaxis":{"domain":[0,1],"type":"linear","autorange":false,"tickmode":"array","range":[1490866560000,1493907840000],"ticktext":["04-03","04-10","04-17","04-24","05-01"],"tickvals":[1491177600000,1491782400000,1492387200000,1492992000000,1493596800000],"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":9.9626400996264},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":"","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"type":"linear","autorange":false,"tickmode":"array","range":[-1.85,104.85],"ticktext":["0","25","50","75","100"],"tickvals":[2.22044604925031e-016,25,50,75,100],"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":9.9626400996264},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.93503937007874},"hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"modeBarButtonsToRemove":["sendDataToCloud"]},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script><!--/html_preserve-->

### 네이버 검색 데이터

4월초부터 각 후보가 검색된 네이버 검색된 데이터는 다음과 같다.

<!--html_preserve--><div id="htmlwidget-073cc1cd993f4c830def" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-073cc1cd993f4c830def">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33"],["2017-04-01","2017-04-02","2017-04-03","2017-04-04","2017-04-05","2017-04-06","2017-04-07","2017-04-08","2017-04-09","2017-04-10","2017-04-11","2017-04-12","2017-04-13","2017-04-14","2017-04-15","2017-04-16","2017-04-17","2017-04-18","2017-04-19","2017-04-20","2017-04-21","2017-04-22","2017-04-23","2017-04-24","2017-04-25","2017-04-26","2017-04-27","2017-04-28","2017-04-29","2017-04-30","2017-05-01","2017-05-02","2017-05-03"],[628,949,3249,3335,2213,2691,2627,947,1287,3235,3044,3159,3294,2835,1110,2208,4239,4054,3868,4793,3144,1939,2572,4142,3511,4381,4402,3239,1761,2396,3280,3096,3208],[522,617,1532,1321,1523,1265,1253,525,770,1729,1303,1441,2084,1565,813,992,1963,1664,2150,2531,1987,960,1563,2264,2822,2987,2058,2620,1094,1639,2645,4249,2333],[610,895,1413,2502,2880,2468,2322,673,1316,2612,2620,3050,3140,2539,909,1852,3889,3339,3140,3928,2801,1384,2303,3458,3250,3654,3146,3029,1389,2483,2646,2858,2284],[353,474,1033,1020,1135,917,938,404,726,1021,791,809,1611,1553,693,1264,1700,1231,1732,2416,1570,646,1447,2090,2521,2279,1410,2063,724,894,1372,3127,1481],[171,251,507,413,436,454,488,152,349,577,505,1017,1519,1084,450,998,1418,948,1543,1698,960,318,1042,1496,1749,1682,1270,1802,543,705,1316,1787,1225]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>date<\/th>\n      <th>문재인<\/th>\n      <th>홍준표<\/th>\n      <th>안철수<\/th>\n      <th>유승민<\/th>\n      <th>심상정<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nDTWidget.formatCurrency(this, row, data, 2, '', 0, 3, ',', '.', true);\nDTWidget.formatCurrency(this, row, data, 3, '', 0, 3, ',', '.', true);\nDTWidget.formatCurrency(this, row, data, 4, '', 0, 3, ',', '.', true);\nDTWidget.formatCurrency(this, row, data, 5, '', 0, 3, ',', '.', true);\nDTWidget.formatCurrency(this, row, data, 6, '', 0, 3, ',', '.', true);\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script><!--/html_preserve-->

## R 코드


~~~{.r}
# 0. 환경설정 ---------------------------------------------------------------
# if (!require("devtools")) install.packages("devtools")
# devtools::install_github("forkonlp/N2H4")
library(N2H4)
library(ggplot2)
library(tidyverse)
library(plotly)
library(lubridate)

# 1. 데이터 긁어오기 --------------------------------------------------------

start_date<-"2017-04-01"
end_date<-"2017-05-01"

candidates <- c("문재인", "홍준표", "안철수", "유승민", "심상정")

trend_df <- c()

for(candidate in candidates){
  print(candidate)
  tmp <- getNewsTrend(candidate, start_date, end_date)
  trend_df <- rbind(trend_df, cbind(data.frame(`후보`=candidate,tmp)))
}

# 2. 데이터 정제 --------------------------------------------------------

trends_df <- trend_df %>% mutate(global_max = max(cnt)) %>% 
  group_by(date) %>% 
  mutate(ntrend = cnt / global_max *100)

trends_hist_df <- trend_df %>% group_by(후보) %>% 
  summarise(tlt_cnt = sum(cnt)) %>% 
  mutate(cnt_pcnt = tlt_cnt/sum(tlt_cnt)) %>% 
  mutate(후보=factor(후보, levels=c("문재인","홍준표","안철수","유승민","심상정")))

# 3. 데이터 시각화 --------------------------------------------------------

ntrend_g <- ggplot(trends_df,aes(x=date, y=ntrend, color=후보)) +
  geom_line() +
  scale_x_date(date_labels="%m-%d") +
  theme_minimal() +
  theme(legend.position="none",
        plot.title = element_text(size = 18, face = "bold"),
        plot.caption=element_text(hjust=0,size=8),
        plot.subtitle=element_text(face="italic"),
        axis.text=element_text(size=7.5))+
  labs(x="",y="",title="후보별 네이버 뉴스검색 추세",
       caption="\n 데이터출처: 네이버, 네이버 뉴스 수집 도구(https://github.com/forkonlp/N2H4/)",
       subtitle="") +
  scale_colour_manual(name="",
                      values=c(문재인="#065ce8", 
                               홍준표="#ff0000",
                               안철수="#07f91f",
                               유승민="#00faff",
                               심상정="#f2ee09")) +
  geom_vline(xintercept=as.numeric(ymd("2017-04-19")), linetype=4, color="darkgrey", size=0.5) +
  geom_vline(xintercept=as.numeric(ymd("2017-04-23")), linetype=4, color="darkgrey", size=0.5) +
  geom_vline(xintercept=as.numeric(ymd("2017-04-25")), linetype=4, color="darkgrey", size=0.5) +
  geom_vline(xintercept=as.numeric(ymd("2017-04-28")), linetype=4, color="darkgrey", size=0.5) +
  geom_vline(xintercept=as.numeric(ymd("2017-05-02")), linetype=4, color="darkgrey", size=0.5) +
  annotate(geom="text",x=as.Date("2017-04-19"), y=3,label="KBS",fontface="bold", size=3) +
  annotate(geom="text",x=as.Date("2017-04-23"), y=3,label="1차",fontface="bold", size=3) +
  annotate(geom="text",x=as.Date("2017-04-25"), y=3,label="JTBC",fontface="bold", size=3) +
  annotate(geom="text",x=as.Date("2017-04-28"), y=3,label="2차",fontface="bold", size=3) +
  annotate(geom="text",x=as.Date("2017-05-02"), y=3,label="3차",fontface="bold", size=3)

ggplot(trends_hist_df, aes(x=후보, y=tlt_cnt, fill=후보)) +
  geom_bar(stat="identity") + 
  scale_colour_manual(name="",
                      values=c(문재인="#065ce8", 
                                  홍준표="#ff0000",
                                  안철수="#07f91f",
                                  유승민="#00faff",
                                  심상정="#f2ee09")) +
  scale_y_continuous(label=scales::comma) +
  theme_minimal() +
  theme(legend.position="none", 
        plot.title = element_text(size = 18, face = "bold"),
        plot.caption=element_text(hjust=0,size=8),
        plot.subtitle=element_text(face="italic"),
        axis.text=element_text(size=15.5))+
  labs(x="",y="",title="후보별 네이버 뉴스검색 추세",
       caption="\n 데이터출처: 네이버, 네이버 뉴스 수집 도구(https://github.com/forkonlp/N2H4/)",
       subtitle="") +
  geom_text(data=trends_hist_df,aes(x=후보,y=tlt_cnt, label=scales::percent(cnt_pcnt)), vjust=-0.3, size=5)


# 4. 표 --------------------------------------------------------------

DT::datatable(trends_df %>% dplyr::select(후보, date, cnt) %>% 
                spread(후보, cnt)) %>% 
  DT::formatCurrency(c(2:6), "", interval=3, mark=',', digits=0)
~~~


